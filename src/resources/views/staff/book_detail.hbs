
		<div class="wrapper d-flex align-items-stretch">
			<nav id="sidebar">
				<div class="custom-menu">
					<button type="button" id="sidebarCollapse" class="btn btn-primary">
	        </button>
        </div>
	  		<div class="img bg-wrap text-center py-4" style="background-image: url(/images/bg_1.jpg);">
	  			<div class="user-logo">
	  				<div class="img" style="background-image: url(/images/li.jpg);"></div>
	  				<h3>Library Management</h3>
	  			</div>
	  		</div>
        <ul class="list-unstyled components mb-5">
          <li class="active">
          <a href="/staff/home"><span class="fa fa-home mr-3"></span> Home</a>
          </li>
          <li>
          <a href="/staff/book"><span class="fa fa-book mr-3"></span>Book</a>
          </li>
          <li>
          <a href="/staff/loan"><span class="fa fa-address-card-o mr-3"></span>Loan</a>
          </li>
          <li>
          <a href="/staff/statistic"><span class="fa fa-handshake-o mr-3"></span>Statistic</a>
          </li>
          <li>
          <a href="/logout"><span class="fa fa-sign-out mr-3"></span> Sign Out</a>
          </li>
        </ul>

    	</nav>

      <div id="content" class="p-4 p-md-5 pt-5">
      {{#if book}}
      <div class="container pt-5">
              <div class="row">

                  <div class="image--shadow mb-5 col-lg-6 col-md-12">
                      <img src="/images/{{book.image}}" alt="">
                  </div>
          
                  <div class="detail-info col-lg-6 col-md-12 pl-lg-5">
                      <h3 class="detail-name">{{book.name}}</h3>
                      <p>Trạng thái: {{book.status}}</p>
                      <div class="note p-3 my-3">
                          <div class="note-text mb-2">
                              <i class="fa fa-check-circle pt-1"></i>
                              <p class="pl-2">Đây là sách uy tín</p>
                          </div>
                          <div class="note-text mb-2">
                              <i class="fa fa-check-circle pt-1"></i>
                              <p class="pl-2">Nếu bạn muốn mượn thì vui lòng click vò bên dưới</p>
                          </div>
                      </div>
                      <div class="quantity mb-3">
                          <p class="quantity-text mb-3">Số lượng</p>
                          <button onclick="changeQuantity(this)" id="decrease" class="adjust-btn btn btn-outline-primary">-</button>
                          <input id="quantity" class="quantity-number" type="number" value="1" disabled>
                          <button onclick="changeQuantity(this)" id="increase" class="adjust-btn btn btn-outline-primary">+</button>
                      </div>
                      <div class="detail-buy">
                        <div class="row">
                            <div class="col-lg-12">
                                <button onclick="" class="btn btn-outline-danger px-5 py-3 mb-3 btn-delete" data-id="{{book._id}}" data-name="{{book.name}}">
                                    <span><i class="fa fa-trash mr-1"></i></span> Xóa sách
                                </button>
                            </div>
                            <div class="col-lg-12">
                                <button data-id="{{book._id}}" data-name="{{book.name}}" data-quantity="{{book.quantity}}" data-description="{{book.description}}" data-slug="{{book.slug}}" data-image="{{book.image}}" class="btn btn-outline-primary px-5 py-3 btn-edit">
                                    <span><i class="fa fa-pencil mr-1"></i></span> Sửa sách
                                </button>
                            </div>
                        </div>   
                    </div>
                  </div>
              </div>
          
              <h3 class="product-title text-primary">Mô tả sản phẩm</h3>
              <p>{{book.description}}</p>
          </div>  
          {{/if}}      
    </div>

    <!-- Confirm delete -->
<div id="confirm-delete-dialog" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Xóa Sách</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
          Bạn có chắc rằng muốn xóa sách <strong id="delete-name"></strong>?
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button data-id= "???" id="btn-delete-confirm" type="button" class="btn btn-danger">Xóa</button>
          <button type="button" class="btn btn-dark" data-dismiss="modal">Đóng</button>
        </div>
        
      </div>
    </div>
  </div>

<!-- Update user -->
<div id="confirm-edit-dialog" class="modal fade">
    <div class="modal-dialog">
      <div class="modal-content">
      
        <!-- Modal Header -->
        <div class="modal-header">
          <h4 class="modal-title">Cập nhật thông tin sách</h4>
          <button type="button" class="close" data-dismiss="modal">&times;</button>
        </div>
        
        <!-- Modal body -->
        <div class="modal-body">
             <div class="form-group">
                <label for="name">Tên sách</label>
                <input value="{{book.name}}" name="name" required class="form-control" type="text" placeholder="Name" id="name" style="border: 1px solid rgba(0, 0, 0, 0.171)">
            </div>
            <div class="form-group">
                <label for="quantity">Số lượng</label>
                <input value="{{book.quantity}}" name="quantity" required class="form-control" type="number" placeholder="Quantity" id="quantity" style="border: 1px solid rgba(0, 0, 0, 0.171)">
            </div>
            <div class="form-group">
                <label for="description">Mô tả</label>
                <textarea id="description" name="description" cols="30" rows="6"  class="form-control" placeholder="Mô tả" style="border: 1px solid rgba(0, 0, 0, 0.171); height: 100px !important">{{book.description}}</textarea>
            </div>  
            <div class="form-group">
                <label for="slug">Đường dẫn</label>
                    <input value="{{book.slug}}" name="slug" required class="form-control" type="text" placeholder="Slug" id="slug" style="border: 1px solid rgba(0, 0, 0, 0.171)">
            </div>  
            <div class="form-group">
                <label for="image" class="">Ảnh minh họa</label>
                <input value = "{{book.image}}" type="file" class="form-control" required accept="image/*" id="image" name="image" style="border: 1px solid rgba(0, 0, 0, 0.171)">
            </div>
        </div>
        
        <!-- Modal footer -->
        <div class="modal-footer">
          <button data-id = "???" type="button" class="btn btn-primary" id="btn-edit-confirm">Cập nhật</button>
          <button type="button" class="btn btn-dark" data-dismiss="modal">Đóng</button>
        </div>
        </form>
      </div>
    </div>
  </div>
<!-- End Update user -->

<script>
    $('.btn-delete').click(e => {
        const btn = e.target
        const id = btn.dataset.id
        const name = btn.dataset.name

        console.log(id)
        console.log(name)

    
        $('#btn-delete-confirm').attr('data-id', id)
        $('#delete-name').html(name)
        $('#confirm-delete-dialog').modal('show')
    })

    $('#btn-delete-confirm').click(e => {
        $('#confirm-delete-dialog').modal('hide')
        const btn = e.target
        const id = btn.dataset.id

        fetch('/staff/delete/' + id, {
            method: 'DELETE'
        })
        .then(res => res.json())
        .then(json => {
            if(json.code === 0){
                console.log("Xóa thành công")
                window.location.href = '/staff/book'
            }
        })
        .catch(e => console.log(e))
    }) 

    $('.btn-edit').click(e => {
        const btn = e.target
        const id = btn.dataset.id
        const name = btn.dataset.name
        const quantity= btn.dataset.quantity
        const description = btn.dataset.description
        const slug = btn.dataset.slug
        const image = btn.dataset.image

        /*$('#name').val(name)
        $('#quantity').val(2)
        $('#description').val(description)
        $('#slug').val(slug)
        //$('#image').val(image)*/

        console.log(id)
        console.log(name)
        console.log(quantity)
        console.log(description)
        console.log(slug)
        console.log(image)

        $('#btn-edit-confirm').attr('data-id', id)
        $('#confirm-edit-dialog').modal('show')

    })

    $('#btn-edit-confirm').click(e => {
        $('#confirm-edit-dialog').modal('hide')
        const btn = e.target
        let id = btn.dataset.id
        let name = $('#name').val()
        let quantity = $('#quantity').val()
        let description = $('#description').val()
        let slug = $('#slug').val()
        let image = $('#image').val()

        console.log(image)
        

        fetch('/staff/update', {
            headers:{
                'Content-Type':'application/x-www-form-urlencoded'
            }, 
            method: 'POST',
            body:'id='+ id + '&name=' + name + '&quantity=' + quantity + '&description=' + description + '&slug=' + slug + '&image=' + image,
        })
        .then(res => res.json())
        .then(json => {
            if(json.code === 0){
                console.log("Cập nhật thành công thành công")
                window.location.href = '/staff/book'
            }
        })
        .catch(e => console.log(e))
    })
</script>
